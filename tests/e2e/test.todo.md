# E2Eテスト計画

## 1. 単語リスト機能のテスト
### 新規リスト作成
- [] リスト作成ダイアログが表示される
- [] 必須フィールド（リスト名）が空の場合、エラーが表示される
- [] 公開/非公開の切り替えができる
- [] リスト作成後、一覧に新しいリストが表示される

### リスト管理
- [] リストの編集（名前、説明、公開設定）
- [] リストへの単語追加
- [] リストからの単語削除
- [] 単語の編集（日本語、英語、メモ）

## 2. クイズ機能のテスト
### クイズ開始
- [] リストからクイズを開始できる
- [] ランダムクイズを開始できる

### クイズ実行
- [] 問題が正しく表示される
- [] 正解/不正解の判定が正しく行われる
- [] 進捗状況（何問中何問目）が表示される
- [] 最終結果が正しく表示される

## 3. フラッシュカード機能のテスト
- [] フラッシュカードモードに切り替えできる
- [] カードをめくることができる
- [] 次の単語に進むことができる
- [] 学習完了としてマークできる

## 4. 認証機能のテスト
- [] 未ログインユーザーは制限された機能にアクセスできない
- [] ログイン後、保存した単語リストにアクセスできる

## 5. レスポンシブ対応のテスト
- [] モバイル画面でも正しく表示・操作できる
- [] タブレット画面でも正しく表示・操作できる

## テスト環境の準備

### 1. Googleテストユーザーのセットアップ
- [] シードスクリプトの作成：`tests/e2e/helpers/seed-auth.ts`
  - テストユーザーデータの作成（users テーブル）
    ```ts
    {
      id: "test-google-user",
      name: "Test User",
      email: "test-google@example.com",
      image: "https://example.com/avatar.jpg"
    }
    ```
  - OAuth認証情報の作成（accounts テーブル）
    ```ts
    {
      provider: "google",
      type: "oauth",
      providerAccountId: "google-123",
      access_token: "test-access-token",
      expires_at: 1735689600000 // 2025/1/1
    }
    ```
  - セッション情報の作成（sessions テーブル）
    ```ts
    {
      sessionToken: "test-session-token",
      expires: 1735689600000 // 2025/1/1
    }
    ```

### 2. テスト用データの準備
- [] テストユーザー用の単語リスト作成
  - 公開リスト1つ
  - 非公開リスト1つ
- [] 単語リストに単語を追加（wordListItems）
- [] 学習進捗データの作成（userWords）
- [] クイズ履歴の作成（quizResults）

### 3. テストヘルパー関数の実装
- [] ログイン状態のセットアップ
  - Cookieの設定
  - セッショントークンの管理
- [] テストデータのクリーンアップ
  - テスト実行前の準備
  - テスト完了後のクリーンアップ

## 共通のテストヘルパー
1. ログイン/ログアウト処理
2. テストデータのセットアップと削除
3. デバイスサイズの設定

## テスト優先順位
1. 単語リスト機能（CRUD操作の基本機能）
2. クイズ機能（主要な学習機能）
3. フラッシュカード機能
4. 認証機能
5. レスポンシブ対応

## 注意点
- テストの独立性を保つ
- テストデータは各テスト実行前に初期化
- 非同期処理の適切な待機
- エラーケースの網羅
- パフォーマンスへの影響を考慮
